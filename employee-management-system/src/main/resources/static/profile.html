<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EMS - Profile</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-light">

<div class="container mt-4">
  <h2>My Profile</h2>
  <button class="btn btn-danger float-end" onclick="logout()">Logout</button>
  <hr>
  <pre id="profile"></pre>
</div>

<script>
const auth = localStorage.getItem("auth");
if (!auth) window.location.href = "index.html";

async function loadProfile() {
  const res = await fetch("http://localhost:8081/api/profile", {
    headers: { "Authorization": "Basic " + auth }
  });
  const data = await res.json();
  document.getElementById("profile").textContent = JSON.stringify(data, null, 2);
}

function logout() {
  localStorage.removeItem("auth");
  window.location.href = "index.html";
}

loadProfile();
</script>

</body>
</html>
